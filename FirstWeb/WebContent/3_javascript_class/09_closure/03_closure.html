<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script type="text/javascript">
//----------------------------------------------------------
// 4. 지역변수를 참조하는 함수 안에 함수 클로저(closure)		
//			전역변수는 특정 함수 몇 개만 공유하지 못하고 전체가 공유하는 변수이다.
//			클로저는 특정 함수가 암묵적으로 다른 함수의 참조를 가지고 있기 때문에
//			호출되는 함수가 참조하는 함수의 메모리 공간을 참조한다. (?)
//			아무튼 클로저를 이용하여 전역변수의 사용을 줄일 수 있다

// 수업으로 진행하지 않고 생략함

	function closure ( init ){
	   var counter = init;
	                                    // counter++;  이 코드는 매번 호출되는 것이 아니기에 공유가 안됨
	   return function() {
	                                    // 리턴 메소드 안에서 변경되는 변수만 공유라고 보면 됨
	      return ++counter;
	   }
	}
	var myClosure = closure(1);
	document.writeln( myClosure() );
	document.writeln( myClosure() );
	document.writeln( myClosure() );
	
	//---------------------------------------------------- 여기까지만 하자 밑에는 보륜
	
	
	function add(){
	   var total = 0;
	   return function(num){
	      total +=  num;
	      return total;
	   }
	}
	
	var addClosure = add();
	document.writeln( addClosure(1) + "<br/>");
	document.writeln( addClosure(2) + "<br/>");
	document.writeln( addClosure(3) + "<br/>");
	document.writeln( addClosure(4) + "<br/>");
	
	
	// [ 추가 ] 클로저와 즉시 실행 함수를 같이 사용
	
	var addClosure = function(){
	   var total = 0;
	   return function(num){
	      total +=  num;
	      return total;
	   }
	}();
	   
	document.writeln( addClosure(1) + "<br/>");
	document.writeln( addClosure(2) + "<br/>");
	document.writeln( addClosure(3) + "<br/>");
	document.writeln( addClosure(4) + "<br/>");

</script>
</head>
<body>

</body>
</html>